{"version":3,"sources":["../../src/pages/desafiliar/desafiliar.module.ts","../../src/pages/desafiliar/desafiliar.ts"],"names":[],"mappings":"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","file":"13.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { DesafiliarPage } from './desafiliar';\nimport { TranslateModule } from '@ngx-translate/core';\n\n@NgModule({\n  declarations: [\n    DesafiliarPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(DesafiliarPage),\n    TranslateModule\n  ],\n})\nexport class DesafiliarPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/desafiliar/desafiliar.module.ts","import { Component } from '@angular/core';\nimport { IonicPage, NavController, NavParams, MenuController, LoadingController, AlertController } from 'ionic-angular';\nimport { HttpProvider } from '../../providers/http/http';\nimport { DbaProvider } from '../../providers/dba/dba';\nimport { Device } from '@ionic-native/device';\nimport { UtilsProvider } from '../../providers/utils/utils';\nimport { Storage } from '@ionic/storage';\ndeclare var AesUtil: any;\n\n/**\n * Generated class for the DesafiliarPage page.\n *\n * See https://ionicframework.com/docs/components/#navigation for more info on\n * Ionic pages and navigation.\n */\n\n@IonicPage()\n@Component({\n  selector: 'page-desafiliar',\n  templateUrl: 'desafiliar.html',\n})\nexport class DesafiliarPage {\n\n  constructor(public navCtrl: NavController, public navParams: NavParams,  public menuCtrl: MenuController,\n    public loading: LoadingController,\n    private storage: Storage,\n    public http: HttpProvider,\n    public dba: DbaProvider, \n    private device: Device,\n    private alertCtrl: AlertController,\n    public utils: UtilsProvider) {\n\n    //Metodo para cuando se le de back al celular cierre la app y lo envie al login\n    this.utils.outApp(\"LoginPage\");\n\n      \n  }\n\n  ionViewWillEnter(){\n    \n    //this.presentConfirm();\n  }\n\n  ionViewDidLoad() {\n    console.log('ionViewDidLoad DesafiliarPage');\n    \n  }\n\n  public menu(){\n    this.menuCtrl.toggle();\n  }\n\n  presentConfirm() {\n    let alert = this.alertCtrl.create({\n      title: this.utils.getMessageLanguage(\"logout.message\"),\n      message: this.utils.getMessageLanguage(\"DesafiliarMensaje\"),\n      buttons: [\n        {\n          text: this.utils.getMessageLanguage(\"confirm.btnAceptar\"),\n          handler: data => {\n            if (this.utils.getMessageLanguage(\"confirm.btnAceptar\")) \n            {\n              //this.utils.presentLoading();\n              this.desafiliarUsuario();\n                    \n            }\n          }\n        },\n        {\n          text: this.utils.getMessageLanguage(\"confirm.btnCancelar\"),\n          handler: data => {\n            if (this.utils.getMessageLanguage(\"confirm.btnCancelar\")) \n            {\n              \n              console.log(\"Salida Cancelada\");\n              this.navCtrl.push(\"BandejaMenuPage\");\n            }\n          }\n        }\n      ]\n    });\n    alert.present();\n  }\n\n  \n  presentLoadingDefault() {\n    let loading = this.loading.create({\n      content: ''\n    });\n\n    loading.present();\n\n    setTimeout(() => {\n      loading.dismiss();\n    }, 3000);\n  }\n\n  //DesafiliaciÃ³n de usuario\n  public desafiliarUsuario(){\n\n    //alert(\"entro\");\n    var latitud; \n    var longitud;\n\n    // Obtencion de la longitud y la latitud de la persona\n    this.storage.get('latitud').then((lat) => {\n      this.storage.get('longitud').then((lon) => {\n        if(lat != null && lon != null){\n          latitud = lat;\n          longitud = lon;\n        }\n      });\n    });\n    \n    this.presentLoadingDefault();\n    var aesUtil = new AesUtil(128,1000);\n    var userIdentificator  = this.dba.searchIdDevice(\"optional\");\n    \n    this.storage.get('MESSAGEID').then((val) => {\n      \n      if(val != null){\n        \n        var messageId = val;\n        var urlOtp = \"product/disenrollUser/\";\n\n        var newModel: string = this.utils.changePuntoComa(this.device.model);\n\n        var data = '{\"iddev\":\"' + this.device.uuid + '\",' +\n                    '\"model\":\"' + newModel + '\",' +\n                    '\"cordova\":\"' + this.device.cordova + '\",' +\n                    '\"plataform\":\"' + this.device.platform + '\",' +\n                    '\"version\":\"' + this.device.version + '\",' +\n                    '\"manufacturer\":\"' + this.device.manufacturer + '\",' +\n                    '\"serial\":\"' + this.device.serial + '\",' +\n                    '\"isVirtual\":\"' + this.device.isVirtual + '\"}';\n        \n        var deviceDATA = aesUtil.encrypt(this.http.salt, this.http.iv, this.http.passphrase, data);\n        //Datos del dispositivo\n        var jsonDataDevice = \n          {\n            \"company\": aesUtil.encrypt(this.http.salt, this.http.iv, this.http.passphrase, \"1\"),\n            \"channel\": \"INT\",\n            \"internalUserName\": \"\",\n            \"externalUserName\": \"\",\n            \"messageId\": messageId,\n            \"identificator\": userIdentificator,\n            \"device\": {\n              \"data\": deviceDATA\n            },\n            \"authType\": \"AUTH\",\n            \"reasonCalled\"      : \"auth_desaUsu\",\n            \"scoreRiskCustomer\" : \"0\",\n            \"geoRefLatitude\"    : latitud,\n            \"geoRefLongitude\"   : longitud,\n            \"deviceTrustId\"     : aesUtil.encrypt(this.http.salt, this.http.iv, this.http.passphrase, this.device.uuid),\n            \"deviceTrustData\"   : deviceDATA\n          }\n        \n        this.http.callServer(jsonDataDevice, urlOtp).then(res => {\n          \n          var message = JSON.stringify(res);\n          //alert(\"Desafiliar: \"+message); \n\n          try {\n\n            if (res.message.code == \"0000\" && res.message.description) {\n              this.utils.presentAlert(\"mensajeDesafiliar\");\n              this.dba.dropTable(); // Eliminar Registro\n              this.navCtrl.push(\"LoginPage\", { povDesafiliar: \"1\"});\n\n            }\n            else {\n                this.utils.errorControl(res.message.code);    \n            }\n\n          } \n          catch (error) {\n            this.utils.presentAlert(\"Se presento el siguiente error: \"+error);\n          }\n        },\n          error => {\n            if (error) {\n              this.utils.presentAlert(\"mensajePeticion\" + error);\n              this.storage.clear();\n              this.utils.clearVariableSesion();\n              this.navCtrl.setRoot(\"LoginPage\");\n            }\n          })\n      }\n    });\n\n  }// fin metodo\n\n  public devolverse(){\n    this.navCtrl.push(\"BandejaMenuPage\");\n  }\n\n  public aceptar(){\n    this.presentConfirm();\n  }\n\n  public cancelar(){\n    this.navCtrl.push(\"BandejaMenuPage\");\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/desafiliar/desafiliar.ts"],"sourceRoot":""}