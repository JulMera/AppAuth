{"version":3,"sources":["../../src/pages/condiciones/condiciones.module.ts","../../src/pages/condiciones/condiciones.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;AAAyC;AACO;AACA;AACM;AAWtD,IAAa,qBAAqB;IAAlC;IAAoC,CAAC;IAAD,4BAAC;AAAD,CAAC;AAAxB,qBAAqB;IATjC,uEAAQ,CAAC;QACR,YAAY,EAAE;YACZ,qEAAe;SAChB;QACD,OAAO,EAAE;YACP,sEAAe,CAAC,QAAQ,CAAC,qEAAe,CAAC;YACzC,4EAAe;SAChB;KACF,CAAC;GACW,qBAAqB,CAAG;AAAH;;;;;;;;;;;;;;;;;;;;;;;;;;ACdQ;AACyB;AACP;AACd;AACW;AAChB;AAC2B;AAIpE;;;;;GAKG;AAOH,IAAa,eAAe;IAS1B,yBAAmB,OAAsB,EAAS,SAAoB,EAAS,KAAoB,EAAU,MAAc,EACvG,OAAgB,EAAS,IAAkB,EAAS,QAAkB,EAAS,IAAU;QAD7G,iBAgBC;QAhBkB,YAAO,GAAP,OAAO,CAAe;QAAS,cAAS,GAAT,SAAS,CAAW;QAAS,UAAK,GAAL,KAAK,CAAe;QAAU,WAAM,GAAN,MAAM,CAAQ;QACvG,YAAO,GAAP,OAAO,CAAS;QAAS,SAAI,GAAJ,IAAI,CAAc;QAAS,aAAQ,GAAR,QAAQ,CAAU;QAAS,SAAI,GAAJ,IAAI,CAAM;QAE3G,2DAA2D;QAC3D,QAAQ,CAAC,KAAK,EAAE,CAAC,IAAI,CAAC;YACpB,KAAI,CAAC,gBAAgB,EAAE;QACzB,CAAC,CAAC,CAAC;QAEH,8CAA8C;QAC9C,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,WAAW,CAAC,CAAC,IAAI,CAAC,UAAC,GAAG;YACrC,EAAE,CAAC,CAAC,GAAG,IAAI,IAAI,CAAC,CAAC,CAAC;gBAChB,KAAI,CAAC,SAAS,GAAG,GAAG,CAAC;gBACrB,kDAAkD;YACpD,CAAC;QACH,CAAC,CAAC,CAAC;IAEL,CAAC;IAED,wCAAc,GAAd;QACE,IAAI,CAAC,UAAU,EAAE,CAAC;IACpB,CAAC;IAED,gCAAM,GAAN;QACE,IAAI,CAAC,KAAK,CAAC,cAAc,CAAC,WAAW,CAAC,CAAC;IACzC,CAAC;IAEM,oCAAU,GAAjB;QAAA,iBAgGC;QA/FC,IAAI,OAAO,GAAG,IAAI,OAAO,CAAC,GAAG,EAAC,IAAI,CAAC,CAAC;QACpC,IAAI,IAAI,CAAC;QACT,aAAa;QACb,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,WAAW,CAAC,CAAC,IAAI,CAAC,UAAC,GAAG;YAErC,EAAE,EAAC,IAAI,CAAC,EAAC;gBAEP,IAAI,OAAO,CAAC;gBACZ,IAAI,QAAQ,CAAC;gBAEb,sDAAsD;gBACtD,KAAI,CAAC,OAAO,CAAC,GAAG,CAAC,SAAS,CAAC,CAAC,IAAI,CAAC,UAAC,GAAG;oBACnC,KAAI,CAAC,OAAO,CAAC,GAAG,CAAC,UAAU,CAAC,CAAC,IAAI,CAAC,UAAC,GAAG;wBACpC,EAAE,CAAC,CAAC,GAAG,IAAI,IAAI,IAAI,GAAG,IAAI,IAAI,CAAC,CAAC,CAAC;4BAC/B,OAAO,GAAG,GAAG,CAAC;4BACd,QAAQ,GAAG,GAAG,CAAC;wBACjB,CAAC;oBACH,CAAC,CAAC,CAAC;gBACL,CAAC,CAAC,CAAC;gBAGH,KAAI,CAAC,SAAS,GAAG,GAAG,CAAC;gBAErB,IAAI,aAAa,GAAG,iBAAiB,CAAC;gBACtC,IAAI,gBAAgB,GAAG,KAAI,CAAC,SAAS,CAAC,GAAG,CAAC,gCAAgC,CAAC,CAAC;gBAE5E,EAAE,EAAC,gBAAgB,IAAI,IAAI,IAAI,gBAAgB,IAAI,SAAU,CAAC,EAAC;oBAC7D,IAAI,GAAG,gBAAgB,CAAC;gBAC1B,CAAC;gBACD,IAAI,EAAC;oBACH,IAAI,GAAG,KAAI,CAAC,KAAK,CAAC,WAAW,EAAE,CAAC;gBAClC,CAAC;gBAED,IAAI,QAAQ,GAAW,KAAI,CAAC,KAAK,CAAC,eAAe,CAAC,KAAI,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC;gBAErE,IAAI,IAAI,GAAG,YAAY,GAAG,KAAI,CAAC,MAAM,CAAC,IAAI,GAAG,IAAI;oBACrC,WAAW,GAAG,QAAQ,GAAG,IAAI;oBAC7B,aAAa,GAAG,KAAI,CAAC,MAAM,CAAC,OAAO,GAAG,IAAI;oBAC1C,eAAe,GAAG,KAAI,CAAC,MAAM,CAAC,QAAQ,GAAG,IAAI;oBAC7C,aAAa,GAAG,KAAI,CAAC,MAAM,CAAC,OAAO,GAAG,IAAI;oBAC1C,kBAAkB,GAAG,KAAI,CAAC,MAAM,CAAC,YAAY,GAAG,IAAI;oBACpD,YAAY,GAAG,KAAI,CAAC,MAAM,CAAC,MAAM,GAAG,IAAI;oBACxC,eAAe,GAAG,KAAI,CAAC,MAAM,CAAC,SAAS,GAAG,IAAI,CAAC;gBAE3D,IAAI,UAAU,GAAG,OAAO,CAAC,OAAO,CAAC,KAAI,CAAC,IAAI,CAAC,IAAI,EAAE,KAAI,CAAC,IAAI,CAAC,EAAE,EAAE,KAAI,CAAC,IAAI,CAAC,UAAU,EAAE,IAAI,CAAC,CAAC;gBAE3F,sCAAsC;gBACtC,uBAAuB;gBACvB,KAAI,CAAC,cAAc;oBACjB;wBACE,MAAM,EAAE,IAAI;wBACZ,WAAW,EAAE,KAAI,CAAC,SAAS;wBAC3B,QAAQ,EAAE;4BACR,OAAO,EAAE,OAAO,CAAC,OAAO,CAAC,KAAI,CAAC,IAAI,CAAC,IAAI,EAAE,KAAI,CAAC,IAAI,CAAC,EAAE,EAAE,KAAI,CAAC,IAAI,CAAC,UAAU,EAAE,KAAI,CAAC,MAAM,CAAC,IAAI,CAAC;yBAC/F;wBACD,UAAU,EAAE,MAAM;wBAClB,cAAc,EAAQ,YAAY;wBAClC,mBAAmB,EAAG,GAAG;wBACzB,gBAAgB,EAAM,OAAO;wBAC7B,iBAAiB,EAAK,QAAQ;wBAC9B,eAAe,EAAO,OAAO,CAAC,OAAO,CAAC,KAAI,CAAC,IAAI,CAAC,IAAI,EAAE,KAAI,CAAC,IAAI,CAAC,EAAE,EAAE,KAAI,CAAC,IAAI,CAAC,UAAU,EAAE,KAAI,CAAC,MAAM,CAAC,IAAI,CAAC;wBAC3G,iBAAiB,EAAK,UAAU;qBAEjC;gBAEH,KAAI,CAAC,IAAI,CAAC,UAAU,CAAC,KAAI,CAAC,cAAc,EAAE,aAAa,CAAC,CAAC,IAAI,CAAC,aAAG;oBAC/D,KAAI,CAAC,OAAO,GAAG,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,CAAC;oBACnC,mDAAmD;oBACnD,KAAI,CAAC,MAAM,GAAG,GAAG,CAAC,KAAK,CAAC;oBACxB,KAAI,CAAC,IAAI,GAAG,GAAG,CAAC,IAAI,CAAC;oBAErB,KAAI,CAAC,OAAO,CAAC,GAAG,CAAC,WAAW,EAAE,GAAG,CAAC,SAAS,CAAC,CAAC;oBAE7C,EAAE,EAAE,GAAG,CAAC,SAAS,IAAI,IAAI,IAAK,GAAG,CAAC,SAAS,IAAE,EAAE,CAAC,EAAC;wBAC/C,KAAI,CAAC,OAAO,CAAC,GAAG,CAAC,WAAW,EAAE,GAAG,CAAC,SAAS,CAAC,CAAC;wBAC7C,KAAI,CAAC,SAAS,GAAG,GAAG,CAAC,SAAS,CAAC;oBACjC,CAAC;oBAED,IAAI,CAAC;wBACH,KAAI,CAAC,KAAK,CAAC,YAAY,CAAC,GAAG,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC;oBAC5C,CAAC;oBACD,KAAK,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC;wBACb,KAAI,CAAC,KAAK,CAAC,YAAY,CAAC,wBAAwB,GAAC,KAAK,CAAC,CAAC;oBAC1D,CAAC;gBAEH,CAAC,EACC,eAAK;oBACH,KAAI,CAAC,KAAK,CAAC,YAAY,CAAC,iBAAiB,GAAG,KAAK,CAAC,CAAC;oBACnD,KAAI,CAAC,OAAO,CAAC,KAAK,EAAE,CAAC;oBACrB,KAAI,CAAC,KAAK,CAAC,mBAAmB,EAAE,CAAC;oBACjC,KAAI,CAAC,OAAO,CAAC,OAAO,CAAC,WAAW,CAAC,CAAC;gBACpC,CAAC,CAAC;YACN,CAAC;QACH,CAAC,CAAC,CAAC;IAEL,CAAC,6BAA2B;IAG5B,iFAAiF;IAC1E,0CAAgB,GAAvB;QAAA,iBAgEC;QA9DC,IAAI,MAAM,CAAC;QACX,IAAI,OAAO,CAAC;QACZ,IAAI,OAAO,CAAC;QACZ,IAAI,OAAO,CAAC;QAEZ,2BAA2B;QAC3B,IAAI,CAAC,IAAI,CAAC,aAAa,EAAE;aACtB,IAAI,CAAC,aAAG;YACP,EAAE,CAAC,CAAC,GAAG,CAAC,SAAS,CAAC,CAAC,CAAC;gBAClB,0DAA0D;YAC5D,CAAC;YAAC,IAAI,CAAC,CAAC;gBACN,gEAAgE;YAClE,CAAC;QACH,CAAC,CAAC,CAAC;QAEL,oDAAoD;QACpD,IAAM,OAAO,GAAgB;YAC3B,OAAO,EAAE;gBACP,QAAQ,EAAE,cAAc;gBACxB,qBAAqB;gBACrB,SAAS,EAAE,IAAI;gBACf,KAAK,EAAE,MAAM;aACd;YACD,GAAG,EAAE;gBACH,KAAK,EAAE,IAAI;gBACX,KAAK,EAAE,IAAI;gBACX,KAAK,EAAE,OAAO;aACf;YACD,OAAO,EAAE,EAAE;SACZ,CAAC;QAEF,IAAM,UAAU,GAAe,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;QAEvD,UAAU,CAAC,EAAE,CAAC,cAAc,CAAC,CAAC,SAAS,CAAC,UAAC,YAAiB;YAExD,MAAM,GAAG,YAAY,CAAC,KAAK,CAAC;YAC5B,IAAI,YAAY,GAAG,YAAY,CAAC,OAAO,CAAC;YAExC,IAAI,KAAK,CAAC;YACV,IAAI,KAAK,CAAC;YAEV,OAAO,GAAG,YAAY,CAAC,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;YACnC,KAAK,GAAG,YAAY,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;YAChC,KAAK,GAAG,KAAK,CAAC,CAAC,CAAC,CAAC,KAAK,EAAE,CAAC;YACzB,OAAO,GAAG,KAAK,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC;YAC5B,IAAI,EAAE,GAAG,YAAY,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;YACjC,OAAO,GAAG,EAAE,CAAC,CAAC,CAAC,CAAC;YAEhB,KAAI,CAAC,OAAO,CAAC,IAAI,CAAC,UAAU,EAAE,EAAE,KAAK,EAAE,MAAM,EAAE,MAAM,EAAE,OAAO,EAAE,GAAG,EAAE,OAAO,EAAE,CAAC,CAAC;QAElF,CAAC,CAAC,CAAC;QAEH,UAAU,CAAC,EAAE,CAAC,cAAc,CAAC,CAAC,SAAS,CAAC,UAAC,YAAiB;YACxD,IAAM,cAAc,GAAG,YAAY,CAAC,cAAc,CAAC;YAEnD,IAAI,EAAE,GAAG,cAAc,CAAC;QAE1B,CAAC,CAAC,CAAC;QACH,UAAU,CAAC,EAAE,CAAC,OAAO,CAAC,CAAC,SAAS,CAAC,eAAK;YACpC,OAAO,CAAC,KAAK,CAAC,wBAAwB,EAAE,KAAK,CAAC;QAChD,CAAC,CAAC,CAAC;IAEL,CAAC;IAEM,kCAAQ,GAAf;QACE,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,wBAAwB,CAAC,CAAC;IAC9C,CAAC;IAEM,iCAAO,GAAd;QACE,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,wBAAwB,CAAC,CAAC;IAC9C,CAAC;IAGH,sBAAC;AAAD,CAAC;AAlNY,eAAe;IAJ3B,wEAAS,CAAC;QACT,QAAQ,EAAE,kBAAkB;OACG;KAChC,CAAC;oNAU4B,qEAA+F;QAC9F,OAAO,EAAe,GAA0D;AAwM9G;SAlNY,eAAe,e","file":"14.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { CondicionesPage } from './condiciones';\nimport { TranslateModule } from '@ngx-translate/core';\n\n@NgModule({\n  declarations: [\n    CondicionesPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(CondicionesPage),\n    TranslateModule\n  ],\n})\nexport class CondicionesPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/condiciones/condiciones.module.ts","import { Component } from '@angular/core';\nimport { IonicPage, NavController, NavParams, Platform } from 'ionic-angular';\nimport { UtilsProvider } from '../../providers/utils/utils';\nimport { Device } from '@ionic-native/device';\nimport { HttpProvider } from '../../providers/http/http';\nimport { Storage } from '@ionic/storage';\nimport { Push, PushObject, PushOptions } from '@ionic-native/push/';\n\ndeclare var AesUtil: any;\n\n/**\n * Generated class for the CondicionesPage page.\n *\n * See https://ionicframework.com/docs/components/#navigation for more info on\n * Ionic pages and navigation.\n */\n\n@IonicPage()\n@Component({\n  selector: 'page-condiciones',\n  templateUrl: 'condiciones.html',\n})\nexport class CondicionesPage {\n\n\n  public jsonDataDevice: any;\n  public message: any;\n  public titulo: string;\n  public html: any;\n  public messageId: string;\n\n  constructor(public navCtrl: NavController, public navParams: NavParams, public utils: UtilsProvider, private device: Device,\n              private storage: Storage, public http: HttpProvider, public platform: Platform, public push: Push) {\n\n    // Metodo que escucha el llamado de las notificaciones push\n    platform.ready().then(() => {\n      this.notificacionPush()\n    });\n    \n    //ObtenciÃ³n del messageId - PROVIENE DEL LOGIN\n    this.storage.get('MESSAGEID').then((val) => {\n      if (val != null) {\n        this.messageId = val;\n        //alert(\"messageId condiciones: \"+this.messageId);\n      }\n    });\n\n  }\n\n  ionViewDidLoad() {\n    this.afiliacion();\n  }\n\n  logout() {\n    this.utils.presentConfirm(\"LoginPage\");\n  }\n\n  public afiliacion() {\n    var aesUtil = new AesUtil(128,1000);\n    var lang;\n    //alert(\"1\");\n    this.storage.get('MESSAGEID').then((val) => {\n      \n      if(true){\n\n        var latitud;\n        var longitud;\n\n        // Obtencion de la longitud y la latitud de la persona\n        this.storage.get('latitud').then((lat) => {\n          this.storage.get('longitud').then((lon) => {\n            if (lat != null && lon != null) {\n              latitud = lat;\n              longitud = lon;\n            }\n          });\n        });\n\n        \n        this.messageId = val;\n\n        var urlAfiliacion = \"device/getTerm/\";\n        var consultaLenguaje = this.navParams.get(\"lenguajeSeleccionadoAfiliacion\");\n\n        if(consultaLenguaje != null && consultaLenguaje != undefined ){\n          lang = consultaLenguaje;\n        }\n        else{\n          lang = this.utils.getLanguage();\n        }\n\n        var newModel: string = this.utils.changePuntoComa(this.device.model);\n\n        var data = '{\"iddev\":\"' + this.device.uuid + '\",' +\n                    '\"model\":\"' + newModel + '\",' +\n                    '\"cordova\":\"' + this.device.cordova + '\",' +\n                    '\"plataform\":\"' + this.device.platform + '\",' +\n                    '\"version\":\"' + this.device.version + '\",' +\n                    '\"manufacturer\":\"' + this.device.manufacturer + '\",' +\n                    '\"serial\":\"' + this.device.serial + '\",' +\n                    '\"isVirtual\":\"' + this.device.isVirtual + '\"}';\n        \n        var deviceDATA = aesUtil.encrypt(this.http.salt, this.http.iv, this.http.passphrase, data);\n         \n        //alert(\"Lenguaje a enviar: \"+ lang); \n        //Datos del dispositivo\n        this.jsonDataDevice =\n          {\n            \"lang\": lang,\n            \"messageId\": this.messageId,\n            \"device\": {\n              \"iddev\": aesUtil.encrypt(this.http.salt, this.http.iv, this.http.passphrase, this.device.uuid) \n            },\n            \"authType\": \"AUTH\",\n            \"reasonCalled\"      : \"auth_afili\",\n            \"scoreRiskCustomer\" : \"0\",\n            \"geoRefLatitude\"    : latitud,\n            \"geoRefLongitude\"   : longitud,\n            \"deviceTrustId\"     : aesUtil.encrypt(this.http.salt, this.http.iv, this.http.passphrase, this.device.uuid),\n            \"deviceTrustData\"   : deviceDATA\n            \n          }\n          \n        this.http.callServer(this.jsonDataDevice, urlAfiliacion).then(res => {\n          this.message = JSON.stringify(res);\n          //alert(\"Terminos y condiciones \\n\"+this.message); \n          this.titulo = res.title;\n          this.html = res.text;\n\n          this.storage.set('MESSAGEID', res.messageId);\n\n          if( res.messageId != null ||  res.messageId!=\"\"){\n            this.storage.set('MESSAGEID', res.messageId);\n            this.messageId = res.messageId;\n          }\n\n          try {\n            this.utils.errorControl(res.message.code);\n          } \n          catch (error) {\n            this.utils.presentAlert(\"mensajeErrorControlado\"+error);\n          }\n\n        },\n          error => {\n            this.utils.presentAlert(\"mensajePeticion\" + error);\n            this.storage.clear();\n            this.utils.clearVariableSesion();\n            this.navCtrl.setRoot(\"LoginPage\");\n          })\n      }\n    });\n\n  }//fin del metodo afiliacion\n\n\n  // ***************** CONFIGURACION DE NOTIFICACIONES PUSH ***********************\n  public notificacionPush() {\n\n    var titulo;\n    var authVal;\n    var authCod;\n    var mensaje;\n\n    // comprobamos los permisos\n    this.push.hasPermission()\n      .then(res => {\n        if (res.isEnabled) {\n          //alert('We have permission to send push notifications'); \n        } else {\n          //alert('We do not have permission to send push notifications');\n        }\n      });\n\n    // inicializamos la configuraciÃ³n para android y ios\n    const options: PushOptions = {\n      android: {\n        senderID: '663636742494',\n        //foreground: 'true',\n        forceShow: true,\n        sound: 'true'\n      },\n      ios: {\n        alert: true,\n        badge: true,\n        sound: 'false'\n      },\n      windows: {}\n    };\n\n    const pushObject: PushObject = this.push.init(options);\n\n    pushObject.on('notification').subscribe((notification: any) => {\n\n      titulo = notification.title;\n      var notificacion = notification.message;\n\n      var temp1;\n      var temp2;\n\n      authVal = notificacion.slice(0, 2);\n      temp1 = notificacion.split(\" \");\n      temp2 = temp1[0].split();\n      authCod = temp1[0].slice(2);\n      var zz = notificacion.split(\":\");\n      mensaje = zz[1];\n\n      this.navCtrl.push(\"PushPage\", { title: titulo, codOtp: authCod, msg: mensaje });\n\n    });\n\n    pushObject.on('registration').subscribe((registration: any) => {\n      const registrationId = registration.registrationId;\n\n      var tk = registrationId;\n\n    });\n    pushObject.on('error').subscribe(error => {\n      console.error('Error with Push plugin', error)\n    });\n\n  }\n\n  public cancelar(){\n    this.navCtrl.push(\"RegistroAfiliacionPage\");\n  }\n\n  public aceptar(){\n    this.navCtrl.push(\"RegistroAfiliacionPage\");\n  }\n\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/condiciones/condiciones.ts"],"sourceRoot":""}