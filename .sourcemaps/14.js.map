{"version":3,"sources":["../../src/pages/desafiliar/desafiliar.module.ts","../../src/pages/desafiliar/desafiliar.ts"],"names":[],"mappings":"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","file":"14.js","sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { IonicPageModule } from 'ionic-angular';\r\nimport { DesafiliarPage } from './desafiliar';\r\nimport { TranslateModule } from '@ngx-translate/core';\r\n\r\n@NgModule({\r\n  declarations: [\r\n    DesafiliarPage,\r\n  ],\r\n  imports: [\r\n    IonicPageModule.forChild(DesafiliarPage),\r\n    TranslateModule\r\n  ],\r\n})\r\nexport class DesafiliarPageModule {}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/desafiliar/desafiliar.module.ts","import { Component } from '@angular/core';\r\nimport { IonicPage, NavController, NavParams, MenuController, LoadingController, AlertController, Platform } from 'ionic-angular';\r\nimport { HttpProvider } from '../../providers/http/http';\r\nimport { DbaProvider } from '../../providers/dba/dba';\r\nimport { UtilsProvider } from '../../providers/utils/utils';\r\nimport { Storage } from '@ionic/storage';\r\ndeclare var AesUtil: any;\r\n\r\n/**\r\n * Generated class for the DesafiliarPage page.\r\n *\r\n * See https://ionicframework.com/docs/components/#navigation for more info on\r\n * Ionic pages and navigation.\r\n */\r\n\r\n@IonicPage()\r\n@Component({\r\n  selector: 'page-desafiliar',\r\n  templateUrl: 'desafiliar.html',\r\n})\r\nexport class DesafiliarPage {\r\n\r\n  constructor(public navCtrl: NavController, public navParams: NavParams,  public menuCtrl: MenuController,\r\n    public loading: LoadingController,\r\n    private storage: Storage,\r\n    public http: HttpProvider,\r\n    public dba: DbaProvider, \r\n    private alertCtrl: AlertController,\r\n    public utils: UtilsProvider,\r\n    public platform: Platform) {\r\n\r\n    //Metodo para cuando se le de back al celular cierre la app y lo envie al login\r\n    this.utils.outApp(\"LoginPage\");\r\n    platform.registerBackButtonAction(() => {\r\n      this.navCtrl.push(\"BandejaMenuPage\");\r\n    });\r\n      \r\n  }\r\n\r\n  ionViewWillEnter(){\r\n    \r\n    //this.presentConfirm();\r\n  }\r\n\r\n  ionViewDidLoad() {\r\n    console.log('ionViewDidLoad DesafiliarPage');\r\n    \r\n  }\r\n\r\n  public menu(){\r\n    this.menuCtrl.toggle();\r\n  }\r\n\r\n  presentConfirm() {\r\n    let alert = this.alertCtrl.create({\r\n      title: this.utils.getMessageLanguage(\"logout.message\"),\r\n      message: this.utils.getMessageLanguage(\"DesafiliarMensaje\"),\r\n      buttons: [\r\n        {\r\n          text: this.utils.getMessageLanguage(\"confirm.btnAceptar\"),\r\n          handler: data => {\r\n            if (this.utils.getMessageLanguage(\"confirm.btnAceptar\")) \r\n            {\r\n              //this.utils.presentLoading();\r\n              this.desafiliarUsuario();\r\n                    \r\n            }\r\n          }\r\n        },\r\n        {\r\n          text: this.utils.getMessageLanguage(\"confirm.btnCancelar\"),\r\n          handler: data => {\r\n            if (this.utils.getMessageLanguage(\"confirm.btnCancelar\")) \r\n            {\r\n              \r\n              console.log(\"Salida Cancelada\");\r\n              this.navCtrl.push(\"BandejaMenuPage\");\r\n            }\r\n          }\r\n        }\r\n      ]\r\n    });\r\n    alert.present();\r\n  }\r\n\r\n  \r\n  presentLoadingDefault() {\r\n    let loading = this.loading.create({\r\n      content: ''\r\n    });\r\n\r\n    loading.present();\r\n\r\n    setTimeout(() => {\r\n      loading.dismiss();\r\n    }, 3000);\r\n  }\r\n\r\n  //DesafiliaciÃ³n de usuario\r\n  public desafiliarUsuario(){\r\n    this.dba.searchIdFinger().then(idFinger => {\r\n\r\n   //var userIdentificator  = this.dba.searchIdDevice(\"optional\");\r\n   var userIdentificator  =idFinger;\r\n\r\n\r\n    //alert(\"entro\");\r\n    var latitud; \r\n    var longitud;\r\n\r\n    // Obtencion de la longitud y la latitud de la persona\r\n    this.storage.get('latitud').then((lat) => {\r\n      this.storage.get('longitud').then((lon) => {\r\n        if(lat != null && lon != null){\r\n          latitud = lat;\r\n          longitud = lon;\r\n        }\r\n      });\r\n    });\r\n    \r\n    this.presentLoadingDefault();\r\n    var aesUtil = new AesUtil(128,1000);\r\n    \r\n    \r\n    this.storage.get('MESSAGEID').then((val) => {\r\n\r\n      this.storage.get('msgjsessionId').then((val) => {\r\n        if (val != null) {\r\n          var msgjsessionId = val;\r\n\r\n\r\n          if (val != null) {\r\n\r\n            var messageId = val;\r\n            var urlOtp = \"product/disenrollUser/\";\r\n\r\n           /* var newModel: string = this.utils.changePuntoComa(this.device.model);\r\n\r\n            var data = '{\"iddev\":\"' + this.device.uuid + '\",' +\r\n              '\"model\":\"' + newModel + '\",' +\r\n              '\"cordova\":\"' + this.device.cordova + '\",' +\r\n              '\"plataform\":\"' + this.device.platform + '\",' +\r\n              '\"version\":\"' + this.device.version + '\",' +\r\n              '\"manufacturer\":\"' + this.device.manufacturer + '\",' +\r\n              '\"serial\":\"' + this.device.serial + '\",' +\r\n              '\"isVirtual\":\"' + this.device.isVirtual + '\"}';*/\r\n\r\n              var data =  this.utils.infoDevice();\r\n\r\n            var deviceDATA = aesUtil.encrypt(this.http.salt, this.http.iv, this.http.passphrase, JSON.stringify(data));\r\n            //Datos del dispositivo\r\n            var jsonDataDevice =\r\n            {\r\n              \"company\": aesUtil.encrypt(this.http.salt, this.http.iv, this.http.passphrase, \"1\"),\r\n              \"channel\": \"INT\",\r\n              \"internalUserName\": \"\",\r\n              \"externalUserName\": \"\",\r\n              \"messageId\": messageId,\r\n              \"msgjsessionId\": msgjsessionId,\r\n              \"identificator\": userIdentificator,\r\n              \"device\": {\r\n                \"data\": deviceDATA\r\n              },\r\n              \"authType\": \"AUTH\",\r\n              \"reasonCalled\": \"auth_desaUsu\",\r\n              \"scoreRiskCustomer\": \"0\",\r\n              \"geoRefLatitude\": latitud,\r\n              \"geoRefLongitude\": longitud,\r\n              \"deviceTrustId\": aesUtil.encrypt(this.http.salt, this.http.iv, this.http.passphrase, this.utils.deviceId),\r\n              \"deviceTrustData\": deviceDATA,\r\n              \"idkey\": this.http.idkey\r\n            }\r\n\r\n            this.http.callServer(jsonDataDevice, urlOtp).then(res => {\r\n\r\n              //var message = JSON.stringify(res);\r\n              //alert(\"Desafiliar: \"+message); \r\n\r\n              try {\r\n\r\n                if (res.message.code == \"0000\" && res.message.description) {\r\n                  this.utils.presentAlert(\"mensajeDesafiliar\");\r\n                  this.dba.dropTable(); // Eliminar Registro\r\n                  this.navCtrl.push(\"LoginPage\", { povDesafiliar: \"1\" });\r\n\r\n                }\r\n                else {\r\n                  this.utils.errorControl(res.message.code);\r\n                }\r\n\r\n              }\r\n              catch (error) {\r\n               // this.utils.presentAlert(\"Se presento el siguiente error: \" + error);\r\n              }\r\n            },\r\n              error => {\r\n                if (error) {\r\n                  this.utils.presentAlert(\"mensajePeticion\" + error);\r\n                  this.storage.clear();\r\n                  this.utils.clearVariableSesion();\r\n                  this.navCtrl.setRoot(\"LoginPage\");\r\n                }\r\n              })\r\n\r\n          }\r\n        }\r\n      });\r\n    });\r\n\r\n\r\n\r\n\r\n  })\r\n\r\n\r\n\r\n  }// fin metodo\r\n\r\n  public devolverse() {\r\n    this.navCtrl.push(\"BandejaMenuPage\");\r\n  }\r\n\r\n  public aceptar() {\r\n    this.presentConfirm();\r\n  }\r\n\r\n  public cancelar() {\r\n    this.navCtrl.push(\"BandejaMenuPage\");\r\n  }\r\n  public reiniciarSesion() {\r\n    this.utils.reload();  \r\n  }\r\n  \r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/desafiliar/desafiliar.ts"],"sourceRoot":""}